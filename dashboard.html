<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Employee Dashboard â€” Smart Door System</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
Â  :root{
Â  Â  --bg:#0f1724;
Â  Â  --card:#0f1728;
Â  Â  --glass: rgba(255,255,255,0.03);
Â  Â  --accent-1: linear-gradient(135deg,#7b61ff,#2be7b7);
Â  Â  --accent-2: linear-gradient(135deg,#ff6b6b,#ffd86b);
Â  Â  --glass-2: rgba(255,255,255,0.04);
Â  Â  --muted: #98a0b3;
Â  Â  --success: #4ade80;
Â  }
Â  *{box-sizing:border-box}
Â  body{
Â  Â  margin:0;
Â  Â  min-height:100vh;
Â  Â  font-family:'Inter',system-ui,Segoe UI,Roboto,Arial;
Â  Â  background: radial-gradient(1200px 600px at 10% 10%, rgba(43,231,183,0.06), transparent),
Â  Â  Â  Â  Â  Â  Â  Â  radial-gradient(900px 500px at 90% 90%, rgba(123,97,255,0.06), transparent),
Â  Â  Â  Â  Â  Â  Â  Â  var(--bg);
Â  Â  color:#e6eef8;
Â  Â  -webkit-font-smoothing:antialiased;
Â  Â  -moz-osx-font-smoothing:grayscale;
Â  Â  padding:20px;
Â  }

Â  header{
Â  Â  width:100%;
Â  Â  max-width:1400px;
Â  Â  margin:0 auto 18px;
Â  Â  display:flex;
Â  Â  gap:12px;
Â  Â  align-items:center;
Â  Â  justify-content:space-between;
Â  }
Â  .brand{
Â  Â  display:flex;
Â  Â  gap:12px;
Â  Â  align-items:center;
Â  }
Â  .logo{
Â  Â  width:56px;height:56px;border-radius:12px;
Â  Â  background:var(--accent-1);
Â  Â  box-shadow: 0 6px 20px rgba(43,231,183,0.08), inset 0 -6px 18px rgba(0,0,0,0.15);
Â  Â  display:flex;align-items:center;justify-content:center;font-weight:800;
Â  Â  font-size:18px;color:#041018;
Â  }
Â  h1{font-size:18px;margin:0}
Â  .subtitle{color:var(--muted);font-size:13px}

Â  .controls{display:flex;gap:12px;align-items:center}
Â  .chip{
Â  Â  padding:8px 12px;border-radius:999px;background:var(--glass);border:1px solid rgba(255,255,255,0.03);
Â  Â  font-size:13px;color:var(--muted);
Â  }

Â  main{
Â  Â  width:100%;
Â  Â  max-width:1400px;
Â  Â  margin:0 auto;
Â  Â  display:grid;
Â  Â  /* This change makes the columns stack vertically on desktop */
Â  Â  grid-template-columns: 1fr;
Â  Â  gap:20px;
Â  Â  align-items:start;
Â  }
/* This media query ensures the side-by-side layout on larger screens, as requested */
@media(min-width: 981px){
    main {
        grid-template-columns: 1fr 1fr;
    }
}
Â  /* left column grid */
Â  .col-left{
Â  Â  display:grid;
Â  Â  gap:20px;
Â  Â  grid-template-rows: auto auto;
Â  }

Â  /* top-left row: wide widgets */
Â  .grid-wide{
Â  Â  display:grid;
Â  Â  grid-template-columns: repeat(3, 1fr);
Â  Â  gap:20px;
Â  }

Â  /* right column */
Â  .col-right{
Â  Â  display:grid;
Â  Â  gap:20px;
Â  }

Â  .card{
Â  Â  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
Â  Â  border-radius:14px;
Â  Â  padding:16px;
Â  Â  box-shadow: 0 8px 30px rgba(6,10,20,0.6);
Â  Â  border: 1px solid rgba(255,255,255,0.03);
Â  Â  transition: transform .18s ease, box-shadow .18s ease;
Â  }
Â  .card:hover{ transform: translateY(-6px); box-shadow: 0 18px 50px rgba(2,6,20,0.7); }

Â  .card h2{margin:0 0 10px 0;font-size:15px}
Â  small.muted{color:var(--muted);display:block;margin-top:6px;font-size:12px}

Â  /* music player */
Â  .music-select{
Â  Â  display:flex;gap:10px;align-items:center;
Â  }
Â  select, input[type="number"], input[type="text"], .calc-display, textarea{
Â  Â  background:var(--glass-2);
Â  Â  border:1px solid rgba(255,255,255,0.03);
Â  Â  color: #eaf6f1;
Â  Â  padding:10px 12px;border-radius:10px;
Â  Â  font-size:14px;width:100%;
Â  }
Â  button.btn{
Â  Â  background:var(--accent-1);border:none;color:#041018;padding:10px 12px;border-radius:10px;font-weight:700;cursor:pointer;
Â  Â  transition: opacity .12s;
Â  }
Â  button.btn.alt{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
Â  button.btn:active{opacity:.85}

Â  audio{width:100%;margin-top:12px;border-radius:8px;outline:none}

Â  /* tasks */
Â  .tasks-header{display:flex;gap:10px;align-items:center;justify-content:space-between}
Â  .tasks-list{margin-top:12px;display:flex;flex-direction:column;gap:8px;max-height:260px;overflow:auto;padding-right:6px}
Â  .task{
Â  Â  display:flex;align-items:center;gap:12px;
Â  Â  background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.006));
Â  Â  padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);
Â  Â  justify-content:space-between;
Â  }
Â  .task .left{display:flex;gap:10px;align-items:center}
Â  .task .title{font-weight:600}
Â  .task .meta{font-size:12px;color:var(--muted)}

Â  .icon-btn{
Â  Â  width:36px;height:36px;border-radius:8px;border:none;background:rgba(255,255,255,0.02);color:var(--muted);cursor:pointer;
Â  }

Â  /* calculator */
Â  .calc-grid{display:grid;grid-template-columns: repeat(4,1fr);gap:8px;margin-top:10px}
Â  .calc-key{padding:12px;border-radius:8px;border:none;background:rgba(255,255,255,0.02);cursor:pointer;font-weight:700}

Â  /* salary */
Â  .salary-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
Â  .salary-out{display:flex;flex-direction:column;gap:6px;padding:8px;background:linear-gradient(180deg, rgba(123,97,255,0.04), transparent);border-radius:8px}

Â  /* small widgets */
Â  .small-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}

Â  /* notes */
Â  textarea{min-height:90px;resize:vertical}

Â  /* productivity */
Â  .progress{
Â  Â  height:10px;border-radius:999px;background:rgba(255,255,255,0.04);overflow:hidden;
Â  }
Â  .progress > i{display:block;height:100%;background:linear-gradient(90deg,#2be7b7,#7b61ff);width:0%}
Â  .muted-note{color:var(--muted);font-size:12px;margin-top:8px}
Â  footer{max-width:1400px;margin:20px auto 50px;color:var(--muted);text-align:center;font-size:13px}
Â  @media(max-width:980px){
Â  Â  main{grid-template-columns:1fr}
Â  Â  .grid-wide{grid-template-columns:repeat(1,1fr)}
Â  }
</style>
</head>
<body>
<header>
Â  <div class="brand">
Â  Â  <div class="logo">SDS</div>
Â  Â  <div>
Â  Â  Â  <h1>Employee Dashboard</h1>
Â  Â  Â  <div class="subtitle">Smart Door System â€” Personal workspace</div>
Â  Â  </div>
Â  </div>
Â  <div class="controls">
Â  Â  <div class="chip" id="currentDate">--</div>
Â  Â  <div class="chip" id="deviceChip">Detecting device...</div>
Â  </div>
</header>

<main>
Â  <!-- LEFT COLUMN -->
Â  <section class="col-left">

Â  Â  <!-- top wide widgets: Music / Tasks / Weather -->
Â  Â  <div class="grid-wide">

<!-- PROFILE CARD Ø¨Ø¯Ù„ Weather -->
<div class="card" style="text-align:center">
Â  <h2>Personal Info</h2>
Â  <img src="images/team/abdelraouf m.jpg" alt="Profile Picture"Â 
Â  Â  Â  Â style="width:100px;height:100px;border-radius:50%;object-fit:cover;margin-bottom:10px">
Â  <div><strong id="empName">Abdelraouf Shenkada</strong></div>
Â  <div class="muted" id="empJob">Software Engineer</div>
Â  <div class="muted" id="empDept">Smart Door System Center</div>
</div>

Â  Â  Â Â 
Â  Â  Â  <!-- MUSIC -->
Â  Â  Â  <div class="card">
Â  Â  Â  Â  <h2>Music Player</h2>
Â  Â  Â  Â  <div class="music-select">
Â  Â  Â  Â  Â  <select id="songSelect">
Â  Â  Â  Â  Â  Â  <!-- Update these values to match the actual raw.githubusercontent.com paths if your songs are in repo. -->
Â  Â  Â  Â  Â  Â  <option value="songs/ğ˜ğ˜ªğ˜­ğ˜ªğ˜¢ğ˜® ğ˜“ğ˜¢ğ˜¯ğ˜¦ - ğ˜±ğ˜¢ğ˜³ğ˜µğ˜ªğ˜¤ğ˜­ğ˜¦ğ˜´ ğ˜šğ˜­ğ˜°ğ˜¸ğ˜¦ğ˜¥Â  Â ğ˜™ğ˜¦ğ˜·ğ˜¦ğ˜³ğ˜£(MP3_128K).mp3">ğ˜ğ˜ªğ˜­ğ˜ªğ˜¢ğ˜® ğ˜“ğ˜¢ğ˜¯ğ˜¦ - ğ˜±ğ˜¢ğ˜³ğ˜µğ˜ªğ˜¤ğ˜­ğ˜¦ğ˜´ ğ˜šğ˜­ğ˜°ğ˜¸ğ˜¦ğ˜¥Â  Â ğ˜™ğ˜¦ğ˜·ğ˜¦ğ˜³ğ˜£</option>
Â  Â  Â  Â  Â  Â  <option value="songs/Drake - Toosie Slide (Lyrics) _left foot up right foot slide_(MP3_128K).mp3">Drake - Toosie Slide</option>
Â  Â  Â  Â  Â  Â  <option value="songs/Michael Jackson-Beat it (Lyrics)(MP3_128K).mp3">Michael Jackson-Beat it</option>
Â  Â  Â  Â  Â  Â  <option value="songs/Me and the Devil(MP3_128K).mp3">Me and the Devil</option>
Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  Â  <button class="btn" id="playBtn">Play</button>
Â  Â  Â  Â  Â  <button class="btn alt" id="stopBtn">Stop</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <audio id="player" controls preload="none">
Â  Â  Â  Â  Â  <source id="playerSource" src="" type="audio/mpeg">
Â  Â  Â  Â  Â  Your browser doesn't support audio.
Â  Â  Â  Â  </audio>
Â  Â  Â  Â  <small class="muted">Tip: host MP3s under <code>songs/</code> in your repo and adjust URLs above.</small>
Â  Â  Â  </div>

Â  Â  Â  <!-- TASKS -->
Â  Â  Â  <div class="card">
Â  Â  Â  Â  <div class="tasks-header">
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <h2>To-Do</h2>
Â  Â  Â  Â  Â  Â  <small class="muted">Add tasks â€” they persist after reload</small>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <button class="btn alt" id="clearCompleted">Clear Completed</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div style="display:flex;gap:8px;margin-top:12px">
Â  Â  Â  Â  Â  <input id="taskInput" placeholder="New task..." />
Â  Â  Â  Â  Â  <button class="btn" id="addTaskBtn">Add</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="tasks-list" id="tasksList"></div>

Â  Â  Â  Â  <div style="display:flex;gap:10px;margin-top:12px;align-items:center;justify-content:space-between">
Â  Â  Â  Â  Â  <div class="muted-note" id="tasksSummary">0 tasks</div>
Â  Â  Â  Â  Â  <div style="display:flex;gap:8px">
Â  Â  Â  Â  Â  Â  <button class="icon-btn" id="sortTasks" title="Sort">â‡…</button>
Â  Â  Â  Â  Â  Â  <button class="icon-btn" id="exportTasks" title="Export">â¤“</button>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>



Â  Â  </div> <!-- end grid-wide -->

Â  Â  <!-- second row: calculator + salary -->
Â  Â  <div class="grid-wide">

Â  Â  Â  <!-- CALCULATOR -->
Â  Â  Â  <div class="card">
Â  Â  Â  Â  <h2>Calculator</h2>
Â  Â  Â  Â  <div style="display:flex;gap:8px;align-items:center">
Â  Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  Â  <div class="calc-display" id="calcDisplay" style="height:46px;display:flex;align-items:center;padding:10px;border-radius:8px;font-weight:700;font-size:18px;background:rgba(0,0,0,0.25)"></div>
Â  Â  Â  Â  Â  Â  <div class="calc-grid" id="calcGrid">
Â  Â  Â  Â  Â  Â  Â  <!-- generated by JS -->
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div style="width:1px;background:rgba(255,255,255,0.03);height:180px"></div>
Â  Â  Â  Â  Â  <div style="width:220px">
Â  Â  Â  Â  Â  Â  <h3 style="margin-bottom:8px">Quick ops</h3>
Â  Â  Â  Â  Â  Â  <button class="btn" id="calcClear" style="width:100%;margin-bottom:8px">C</button>
Â  Â  Â  Â  Â  Â  <button class="btn alt" id="calcAns" style="width:100%;margin-bottom:8px">= Evaluate</button>
Â  Â  Â  Â  Â  Â  <small class="muted">Supports + - * / and parenthesis</small>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <!-- SALARY -->
Â  Â  Â  <div class="card">
Â  Â  Â  Â  <h2>Salary & Deductions</h2>
Â  Â  Â  Â  <div class="salary-row">
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label>Gross Monthly Salary</label>
Â  Â  Â  Â  Â  Â  <input type="number" id="grossSalary" min="0" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  <label>Tax %</label>
Â  Â  Â  Â  Â  Â  <input type="number" id="taxPercent" min="0" max="100" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div style="display:flex;gap:10px;margin-top:10px">
Â  Â  Â  Â  Â  <div style="flex:1">
Â  Â  Â  Â  Â  Â  <label>Social Security %</label>
Â  Â  Â  Â  Â  Â  <input type="number" id="ssPercent" min="0" max="100" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div style="width:140px">
Â  Â  Â  Â  Â  Â  <label>Next payday</label>
Â  Â  Â  Â  Â  Â  <div id="nextPayday" style="padding:10px;border-radius:8px;background:linear-gradient(90deg,#222,#111);text-align:center"></div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div style="display:flex;gap:10px;margin-top:12px;align-items:center">
Â  Â  Â  Â  Â  <button class="btn" id="calcSalaryBtn">Calculate</button>
Â  Â  Â  Â  Â  <button class="btn alt" id="saveProfile">Save profile</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div style="margin-top:12px" id="salaryResult">
Â  Â  Â  Â  Â  <!-- results -->
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <small class="muted">Salary assumed to arrive on the 1st of each month.</small>
Â  Â  Â  </div>

Â  Â  Â  <!-- Employment card (rightmost in this row replaced by empty column to keep 3cols) -->
Â  Â  Â  <div class="card">
Â  Â  Â  Â  <h2>Employment</h2>
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  <label>Job Title</label>
Â  Â  Â  Â  Â  <input id="jobTitle" placeholder="e.g. Production Operator" />
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div style="margin-top:10px">
Â  Â  Â  Â  Â  <label>Started working on</label>
Â  Â  Â  Â  Â  <input id="startDate" type="text" placeholder="YYYY-MM-DD" />
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div style="margin-top:12px">
Â  Â  Â  Â  Â  <button class="btn" id="saveStart">Update</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div style="margin-top:12px">
Â  Â  Â  Â  Â  <div id="workDuration">You have worked: --</div>
Â  Â  Â  Â  Â  <div id="daysSince" class="muted-note"></div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  </div> <!-- end second row -->

Â  </section>

Â  <!-- RIGHT COLUMN -->
Â  <aside class="col-right">

Â  Â  <div class="card">
Â  Â  Â  <h2>Device & Profile</h2>
Â  Â  Â  <div id="deviceInfo">Detecting...</div>
Â  Â  Â  <div style="margin-top:12px">
Â  Â  Â  Â  <label>Profile name</label>
Â  Â  Â  Â  <input id="profileName" placeholder="Your name" />
Â  Â  Â  Â  <small class="muted">Saved locally</small>
Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="card">
Â  Â  Â  <h2>Pomodoro Timer</h2>
Â  Â  Â  <div style="display:flex;gap:8px;align-items:center">
Â  Â  Â  Â  <div style="font-weight:800;font-size:28px" id="timerDisplay">25:00</div>
Â  Â  Â  Â  <div style="display:flex;flex-direction:column;gap:6px">
Â  Â  Â  Â  Â  <button class="btn" id="startTimer">Start</button>
Â  Â  Â  Â  Â  <button class="btn alt" id="stopTimer">Stop</button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  Â  <small class="muted">25 / 5 by default. You can change in code.</small>
Â  Â  </div>

Â  Â  <div class="card">
Â  Â  Â  <h2>Pinned Notes</h2>
Â  Â  Â  <textarea id="pinnedNotes" placeholder="Important notes..."></textarea>
Â  Â  Â  <div style="display:flex;gap:8px;margin-top:8px">
Â  Â  Â  Â  <button class="btn" id="saveNotes">Save</button>
Â  Â  Â  Â  <button class="btn alt" id="clearNotes">Clear</button>
Â  Â  Â  </div>
Â  Â  Â  <small class="muted">Notes saved locally in your browser.</small>
Â  Â  </div>

Â  Â  <div class="card">
Â  Â  Â  <h2>Productivity</h2>
Â  Â  Â  <div style="display:flex;flex-direction:column;gap:10px">
Â  Â  Â  Â  <div>Tasks total: <strong id="prodTotal">0</strong></div>
Â  Â  Â  Â  <div>Tasks done: <strong id="prodDone">0</strong></div>
Â  Â  Â  Â  <div class="progress"><i id="prodBar"></i></div>
Â  Â  Â  Â  <div class="muted-note">Completion rate</div>
Â  Â  Â  </div>
Â  Â  </div>

Â  </aside>
</main>

<footer>Made for you â€” customize and drop into your GitHub Pages repo. Replace song links to match your repo structure and add OpenWeatherMap API key to fetch weather.</footer>

<!-- Custom Message Box for alerts -->
<div id="messageBox" style="
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #2d3748;
    color: #e2e8f0;
    padding: 2rem;
    border-radius: 1rem;
    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2), 0 4px 6px rgba(0, 0, 0, 0.1);
    z-index: 1000;
    display: none;
    flex-direction: column;
    gap: 1rem;
    text-align: center;
">
    <p id="messageText" style="font-size: 1.125rem;"></p>
    <button onclick="document.getElementById('messageBox').style.display='none'" class="btn">OK</button>
</div>


<script>
/* ============================
Â  Â Utilities & Initialization
Â  Â ============================ */

// A simple function to display a custom message box instead of alert()
function showMessage(text) {
    document.getElementById('messageText').textContent = text;
    document.getElementById('messageBox').style.display = 'flex';
}

const LS = {
Â  tasks: 'sds_tasks_v1',
Â  profile: 'sds_profile_v1',
Â  notes: 'sds_notes_v1',
Â  settings: 'sds_settings_v1'
};

function qs(id){return document.getElementById(id)}
function saveLS(key, obj){localStorage.setItem(key, JSON.stringify(obj))}
function loadLS(key, fallback){ try{ const v = JSON.parse(localStorage.getItem(key)); return v ?? fallback }catch(e){return fallback} }

/* show current date in header */
function formatDate(d){
Â  return d.toLocaleString(undefined,{weekday:'short',year:'numeric',month:'short',day:'numeric'});
}
qs('currentDate').textContent = formatDate(new Date());

/* device detection */
function detectDevice(){
Â  const ua = navigator.userAgent;
Â  const platform = navigator.platform || 'Unknown';
Â  const info = {
Â  Â  ua, platform, width: screen.width, height: screen.height
Â  };
Â  const s = `<div><strong>UA:</strong> ${ua.split(')')[0]})</div>
Â  Â  Â  Â  Â  Â  Â <div class="muted-note">Platform: ${platform} â€¢ ${info.width}Ã—${info.height}</div>`;
Â  qs('deviceInfo').innerHTML = s;
Â  qs('deviceChip').textContent = platform.includes('Win') ? 'Desktop' : (platform.includes('Android')||/Android/.test(ua) ? 'Mobile' : 'Browser');
}
detectDevice();

/* ============================
Â  Â MUSIC PLAYER
Â  Â ============================ */
const player = qs('player');
const playerSource = qs('playerSource');
const songSelect = qs('songSelect');
const playBtn = qs('playBtn');
const stopBtn = qs('stopBtn');

// initialize player source to selected option (but do not autoplay)
playerSource.src = songSelect.value;
player.load();

// change song
songSelect.addEventListener('change', ()=>{
Â  playerSource.src = songSelect.value;
Â  player.load();
});

// play/stop
playBtn.addEventListener('click', ()=> {
Â  player.play().catch(()=>{ showMessage('Autoplay blocked â€” press play on the audio control') });
});
stopBtn.addEventListener('click', ()=> {
Â  player.pause(); player.currentTime = 0;
});

/* ============================
Â  Â TASKS (localStorage persistence)
Â  Â ============================ */
let tasks = loadLS(LS.tasks, []); // {id, title, done, created}
const tasksList = qs('tasksList');
const taskInput = qs('taskInput');
const addTaskBtn = qs('addTaskBtn');
const clearCompleted = qs('clearCompleted');
const sortTasks = qs('sortTasks');
const exportTasks = qs('exportTasks');
const tasksSummary = qs('tasksSummary');

function renderTasks(){
Â  tasksList.innerHTML = '';
Â  if(tasks.length === 0){ tasksList.innerHTML = '<div class="muted-note">No tasks yet</div>' }
Â  tasks.forEach(t=>{
Â  Â  const div = document.createElement('div'); div.className = 'task';
Â  Â  const left = document.createElement('div'); left.className='left';
Â  Â  const cb = document.createElement('input'); cb.type='checkbox'; cb.checked = !!t.done;
Â  Â  cb.addEventListener('change', ()=>{ t.done = cb.checked; saveTasks(); renderTasks(); updateProductivity(); });
Â  Â  const txt = document.createElement('div'); txt.innerHTML = `<div class="title">${escapeHtml(t.title)}</div><div class="meta">${new Date(t.created).toLocaleString()}</div>`;
Â  Â  left.appendChild(cb); left.appendChild(txt);
Â  Â  const actions = document.createElement('div');
Â  Â  const del = document.createElement('button'); del.className='icon-btn'; del.innerHTML='âœ•';
Â  Â  del.addEventListener('click', ()=>{ tasks = tasks.filter(x=>x.id!==t.id); saveTasks(); renderTasks(); updateProductivity(); })
Â  Â  actions.appendChild(del);
Â  Â  div.appendChild(left); div.appendChild(actions);
Â  Â  tasksList.appendChild(div);
Â  });
Â  tasksSummary.textContent = `${tasks.length} task(s) â€¢ ${tasks.filter(t=>t.done).length} done`;
}

function saveTasks(){ saveLS(LS.tasks, tasks) }
function addTask(title){
Â  const t = {id: Date.now().toString(36), title, done:false, created: new Date().toISOString()};
Â  tasks.unshift(t); saveTasks(); renderTasks(); updateProductivity();
}
addTaskBtn.addEventListener('click', ()=>{ const v = taskInput.value.trim(); if(!v) return; addTask(v); taskInput.value=''; })
taskInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ addTaskBtn.click(); } });

clearCompleted.addEventListener('click', ()=>{ tasks = tasks.filter(t=>!t.done); saveTasks(); renderTasks(); updateProductivity(); })
sortTasks.addEventListener('click', ()=>{ tasks.sort((a,b)=>b.created.localeCompare(a.created)); saveTasks(); renderTasks(); })
exportTasks.addEventListener('click', ()=>{ const data = JSON.stringify(tasks, null,2); const blob = new Blob([data],{type:'application/json'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href=url; a.download='tasks.json'; a.click(); URL.revokeObjectURL(url); });

function escapeHtml(s){ return s.replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[c]) }

renderTasks();

/* ============================
Â  Â PRODUCTIVITY summary
Â  Â ============================ */
function updateProductivity(){
Â  const total = tasks.length;
Â  const done = tasks.filter(t=>t.done).length;
Â  qs('prodTotal').textContent = total;
Â  qs('prodDone').textContent = done;
Â  const pct = total === 0 ? 0 : Math.round(done/total*100);
Â  qs('prodBar').style.width = pct + '%';
}
updateProductivity();



/* ============================
Â  Â CALCULATOR
Â  Â ============================ */
const calcDisplay = qs('calcDisplay');
const calcGrid = qs('calcGrid');
let calcExpr = '';
function rebuildCalc(){
Â  calcGrid.innerHTML = '';
Â  const keys = [
Â  '7','8','9','/',
Â  '4','5','6','*',
Â  '1','2','3','-',
Â  '0','.','(',')',
Â  '+','C','â†','='
];
Â  keys.forEach(k=>{
Â  Â  const b = document.createElement('button'); b.className='calc-key'; b.textContent=k;
Â  Â  b.addEventListener('click', ()=> onCalcKey(k));
Â  Â  calcGrid.appendChild(b);
Â  });
Â  renderCalc();
}
function renderCalc(){ calcDisplay.textContent = calcExpr || '0' }
function onCalcKey(k){
Â  if(k === 'C'){ calcExpr = ''; renderCalc(); return; }
Â  if(k === 'â†'){ calcExpr = calcExpr.slice(0,-1); renderCalc(); return; }
Â  if(k === '='){ evaluateCalc(); return; }
Â  // unify Ã— Ã·
Â  if(k === 'Ã—') k='*'; if(k === 'Ã·') k='/';
Â  calcExpr += k; renderCalc();
}
function evaluateCalc(){
Â  try{
Â  Â  // safe eval: allow digits, operators, parentheses, decimal and spaces
Â  Â  if(!/^[0-9+\-*/().\s]+$/.test(calcExpr)) { showMessage('Unsupported expression'); return; }
Â  Â  const val = Function('"use strict";return ('+calcExpr+')')();
Â  Â  calcExpr = String(val);
Â  Â  renderCalc();
Â  }catch(e){ showMessage('Invalid expression'); }
}
rebuildCalc();

qs('calcClear').addEventListener('click', ()=>{ calcExpr=''; renderCalc(); });
qs('calcAns').addEventListener('click', evaluateCalc);

/* ============================
Â  Â SALARY & PROFILE
Â  Â ============================ */
const grossSalaryEl = qs('grossSalary');
const taxPercentEl = qs('taxPercent');
const ssPercentEl = qs('ssPercent');
const salaryResultEl = qs('salaryResult');
const nextPaydayEl = qs('nextPayday');
const calcSalaryBtn = qs('calcSalaryBtn');
const saveProfileBtn = qs('saveProfile');

function computeNextPayday(now = new Date()){
Â  const year = now.getFullYear();
Â  const month = now.getMonth();
Â  const today = now.getDate();
Â  // Ù„Ùˆ Ø§Ù„ÙŠÙˆÙ… Ù‚Ø¨Ù„ 1 â†’ Ø±Ø§ØªØ¨ Ù†ÙØ³ Ø§Ù„Ø´Ù‡Ø±ØŒ Ù„Ùˆ Ù„Ø§ â†’ Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ø¬Ø§ÙŠ
Â  const paydayMonth = (today <= 1) ? month : month + 1;
Â  return new Date(year, paydayMonth, 1, 9, 0, 0);
}

function formatCountdown(target){
Â  const now = new Date();
Â  const diff = target - now;
Â  if(diff <= 0) return 'Today';
Â  const days = Math.floor(diff / (1000*60*60*24));
Â  const hours = Math.floor(diff / (1000*60*60) % 24);
Â  const mins = Math.floor(diff / (1000*60) % 60);
Â  return `${days}d ${hours}h ${mins}m`;
}

function calcSalary(){
Â  const gross = Number(grossSalaryEl.value) || 0;
Â  const tax = Number(taxPercentEl.value) || 0;
Â  const ss = Number(ssPercentEl.value) || 0;
Â  const taxAmt = gross * (tax/100);
Â  const ssAmt = gross * (ss/100);
Â  const net = gross - taxAmt - ssAmt;
Â  salaryResultEl.innerHTML = `
Â  Â  <div class="salary-out"><div>Gross: <strong>${formatNumber(gross)} </strong></div>
Â  Â  <div>Tax (${tax}%): <strong>${formatNumber(taxAmt)}</strong></div>
Â  Â  <div>Social Security (${ss}%): <strong>${formatNumber(ssAmt)}</strong></div>
Â  Â  <div style="margin-top:8px;border-top:1px dashed rgba(255,255,255,0.03);padding-top:8px">Net pay: <strong style="font-size:18px">${formatNumber(net)}</strong></div></div>
Â  `;
Â  const payday = computeNextPayday();
Â  nextPaydayEl.textContent = payday.toLocaleDateString() + ' â€¢ ' + formatCountdown(payday);
}
function formatNumber(n){
Â  return n.toLocaleString();
}
calcSalaryBtn.addEventListener('click', ()=>{
Â  calcSalary(); saveProfile();
});
saveProfileBtn.addEventListener('click', saveProfile);
function saveProfile(){
Â  const profile = loadLS(LS.profile, {});
Â  profile.gross = Number(grossSalaryEl.value) || 0;
Â  profile.tax = Number(taxPercentEl.value) || 0;
Â  profile.ss = Number(ssPercentEl.value) || 0;
Â  profile.jobTitle = qs('jobTitle').value || profile.jobTitle || '';
Â  profile.name = qs('profileName').value || profile.name || '';
Â  saveLS(LS.profile, profile);
Â  showMessage('Profile saved locally');
Â  populateProfile();
}

/* load profile on start */
function populateProfile(){
Â  const profile = loadLS(LS.profile, {});
Â  if(profile.gross) grossSalaryEl.value = profile.gross;
Â  if(profile.tax) taxPercentEl.value = profile.tax;
Â  if(profile.ss) ssPercentEl.value = profile.ss;
Â  if(profile.jobTitle) qs('jobTitle').value = profile.jobTitle;
Â  if(profile.name) qs('profileName').value = profile.name;
Â  calcSalary();
}
populateProfile();

/* Next payday live countdown update */
setInterval(()=>{ const payday = computeNextPayday(); nextPaydayEl.textContent = payday.toLocaleDateString() + ' â€¢ ' + formatCountdown(payday); }, 60*1000);

/* ============================
Â  Â Employment duration
Â  Â ============================ */
const startDateEl = qs('startDate');
const saveStartBtn = qs('saveStart');
const workDurationEl = qs('workDuration');
const daysSinceEl = qs('daysSince');

// prefill start date as 2025-08-01 if none (as per user)
(function initStart(){
Â  const saved = loadLS(LS.profile, {});
Â  if(saved.startDate) startDateEl.value = saved.startDate;
Â  else { startDateEl.value = '2025-08-01'; saveLS(LS.profile, {...saved, startDate:startDateEl.value}); }
Â  updateWorkDuration();
})();

saveStartBtn.addEventListener('click', ()=>{
Â  const val = startDateEl.value.trim();
Â  if(!/^\d{4}-\d{2}-\d{2}$/.test(val)){ showMessage('Use YYYY-MM-DD'); return; }
Â  const profile = loadLS(LS.profile, {}); profile.startDate = val; saveLS(LS.profile, profile);
Â  updateWorkDuration();
Â  showMessage('Start date updated');
});

function updateWorkDuration(){
Â  const profile = loadLS(LS.profile, {});
Â  const sd = profile.startDate || startDateEl.value;
Â  const since = new Date(sd + 'T00:00:00');
Â  const now = new Date();
Â  if(isNaN(since)) { workDurationEl.textContent = 'Invalid start date'; return; }
Â  // compute months and days roughly
Â  let years = now.getFullYear() - since.getFullYear();
Â  let months = now.getMonth() - since.getMonth();
Â  let days = now.getDate() - since.getDate();
Â  if(days < 0){ months -= 1; const prevMonth = new Date(now.getFullYear(), now.getMonth(), 0).getDate(); days += prevMonth; }
Â  if(months < 0){ years -= 1; months += 12; }
Â  const totalDays = Math.floor((now - since)/(1000*60*60*24));
Â  workDurationEl.innerHTML = `You have worked <strong>${years}y ${months}m ${days}d</strong>`;
Â  daysSinceEl.textContent = `Total: ${totalDays} days since ${sd}`;
}

/* ============================
Â  Â Pinned Notes (persist)
Â  Â ============================ */
const notesEl = qs('pinnedNotes');
const saveNotesBtn = qs('saveNotes');
const clearNotesBtn = qs('clearNotes');
notesEl.value = loadLS(LS.notes, '');
saveNotesBtn.addEventListener('click', ()=>{ saveLS(LS.notes, notesEl.value); showMessage('Notes saved locally'); });
clearNotesBtn.addEventListener('click', ()=>{ notesEl.value=''; saveLS(LS.notes, ''); });

/* ============================
Â  Â Profile name (persist)
Â  Â ============================ */
qs('profileName').addEventListener('change', ()=> {
Â  const p = loadLS(LS.profile, {}); p.name = qs('profileName').value; saveLS(LS.profile,p);
});

/* ============================
Â  Â Pomodoro Timer
Â  Â ============================ */
let timerInterval = null;
let remaining = 25*60; // seconds
const timerDisplay = qs('timerDisplay');
const startTimerBtn = qs('startTimer');
const stopTimerBtn = qs('stopTimer');

function renderTimer(){
Â  const mm = String(Math.floor(remaining/60)).padStart(2,'0');
Â  const ss = String(remaining%60).padStart(2,'0');
Â  timerDisplay.textContent = `${mm}:${ss}`;
}
startTimerBtn.addEventListener('click', ()=>{
Â  if(timerInterval) return;
Â  timerInterval = setInterval(()=>{
Â  Â  remaining -= 1;
Â  Â  if(remaining <= 0){ clearInterval(timerInterval); timerInterval=null; remaining = 25*60; showMessage('Pomodoro finished'); }
Â  Â  renderTimer();
Â  }, 1000);
});
stopTimerBtn.addEventListener('click', ()=>{
Â  if(timerInterval) clearInterval(timerInterval);
Â  timerInterval = null;
});

renderTimer();

/* ============================
Â  Â Load pinned app settings & tasks on init
Â  Â ============================ */
(function initAll(){
Â  // profile name and job title loaded above
Â  const profile = loadLS(LS.profile, {});
Â  if(profile.name) qs('profileName').value = profile.name;
Â  if(profile.jobTitle) qs('jobTitle').value = profile.jobTitle;
Â  if(profile.startDate) startDateEl.value = profile.startDate;

Â  // tasks already loaded
Â  updateWorkDuration();
Â  updateProductivity();
})();

/* ============================
Â  Â Helpers
Â  Â ============================ */
function formatCurrency(n){ return n.toLocaleString(); }

/* Prevent accidental navigation from losing unsaved notes/tasks? Optional
window.addEventListener('beforeunload', function(e){
Â  // nothing forced; user data saved automatically
});
*/

</script>
</body>

</html>
